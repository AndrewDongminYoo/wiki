<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Asynchronous Method To Synchronous Method in RN | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/wiki/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/wiki/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/wiki/en/blog/asynchronous-method-to-synchronous-method-in-react-native"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Asynchronous Method To Synchronous Method in RN | My Site"><meta data-rh="true" name="description" content="리액트 네이티브 라이브러리 시 동기식으로 메소드를 호출하는 방법"><meta data-rh="true" property="og:description" content="리액트 네이티브 라이브러리 시 동기식으로 메소드를 호출하는 방법"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-21T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://gravatar.com/donminzzi"><link data-rh="true" rel="icon" href="/wiki/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/wiki/en/blog/asynchronous-method-to-synchronous-method-in-react-native"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/wiki/blog/asynchronous-method-to-synchronous-method-in-react-native" hreflang="ko"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/wiki/en/blog/asynchronous-method-to-synchronous-method-in-react-native" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/wiki/blog/asynchronous-method-to-synchronous-method-in-react-native" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/wiki/en/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wiki/en/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/wiki/en/assets/css/styles.a30419b5.css">
<script src="/wiki/en/assets/js/runtime~main.ed64e0e1.js" defer="defer"></script>
<script src="/wiki/en/assets/js/main.2608a6a3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wiki/en/"><div class="navbar__logo"><img src="/wiki/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/wiki/en/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/wiki/blog/asynchronous-method-to-synchronous-method-in-react-native" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/wiki/en/blog/asynchronous-method-to-synchronous-method-in-react-native" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a class="navbar__item navbar__link" href="/wiki/en/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wiki/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/AndrewDongminYoo/wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/wiki/en/blog/front-backend-developer-roadmap">프론트+백엔드 개발자 로드맵</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/wiki/en/blog/static-property-in-java-class">Static Property in Java Class</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/wiki/en/blog/four-mainstream-d-bs-and-features">가장 많이 사용되는 주류 DB 4가지와 특징</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/wiki/en/blog/generate-unicode-emoji-regular-expression">Generate Unicode emoji regular expression</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/wiki/en/blog/redirection-of-the-website">웹사이트의 리다이렉팅 방식</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="리액트 네 이티브 라이브러리 시 동기식으로 메소드를 호출하는 방법"><header><h1 class="title_f1Hy" itemprop="headline">Asynchronous Method To Synchronous Method in RN</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-21T00:00:00.000Z" itemprop="datePublished">March 21, 2023</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://gravatar.com/donminzzi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/82999715?v=4" alt="Dongmin Yu" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://gravatar.com/donminzzi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dongmin Yu</span></a></div><small class="avatar__subtitle" itemprop="description">Cross Platform Developer Android, iOS, macOS.</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 id="리액트-네이티브-라이브러리-시-동기식으로-메소드를-호출하는-방법">리액트 네이티브 라이브러리 시 동기식으로 메소드를 호출하는 방법</h2>
<p>iOS 네이티브 모듈에서 JavaScript로 결과를 전달하려면 콜백을 사용하거나 이벤트를 내보낼 수 있습니다. 그러나 동기식 네이티브 메서드를 만들고 싶다면 <code>RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD</code> 를 사용할 수 있습니다. 이 방법으로 iOS에서 기본 모듈의 기본 scaffolding 설정을 할 수 있습니다 .</p>
<h3 id="references">References</h3>
<p>(1) <a href="https://velog.io/@he0_077/React-Native-Native-Module-iOS%EB%B2%88%EC%97%AD">[React Native] Native Module (iOS)(번역)</a>
(2) <a href="https://stackoverflow.com/questions/29771622/react-native-how-to-export-a-method-with-a-return-value">React Native: How to export a method with a return value?</a>
(3) <a href="https://stackoverflow.com/questions/60634046/is-there-way-to-call-rct-export-method-inside-native-ios-code">Is there way to call RCT_EXPORT_METHOD inside native iOS code</a></p>
<h2 id="rct_export_blocking_synchronous_method"><code>RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD</code></h2>
<p><code>RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD</code> 를 사용하여 동기식 네이티브 메서드를 만들 수 있습니다. 이 메서드의 반환 유형은 개체 유형 (ID) 이어야 하며 JSON에서 직렬화 할 수 있어야 합니다. 이는 hook이 0 또는 JSON 값만 반환할 수 있음을 의미합니다.
그러나 대부분의 경우 비동기적으로 호출되는 <code>RCT_EXPORT_METHOD</code>를 사용하는 것이 좋습니다. 동기적으로 메서드를 호출하면 성능에 큰 영향을 줄 수 있기 때문입니다.</p>
<h3 id="references-1">References</h3>
<p>(1) <a href="https://velog.io/@he0_077/React-Native-Native-Module-iOS%EB%B2%88%EC%97%AD">[React Native] Native Module (iOS)(번역)</a>
(2) <a href="https://medium.com/@some_day_man/synchronous-returns-in-react-native-native-modules-453af33d5999">Synchronous returns in React Native native modules | by Alec Larson | Medium</a>
(3) <a href="https://github.com/facebook/react-native/blob/main/React/Base/RCTBridgeModule.h">react-native/RCTBridgeModule.h at main · facebook/react-native</a></p>
<h2 id="비동기-메소드를-줄이기-위한-접근-방법">비동기 메소드를 줄이기 위한 접근 방법</h2>
<p>Q. 모든 메소드에 동기 응답을 받고 싶은 것은 아니고, Segway BLE Module과 같은 외부 Pod이 응답가능한 상태인지 정도를 확인하려는 용도야. 이런 경우엔 동기적으로 응답을 받는 것보다 아무것도 응답받지 않고, 네이티브 코드가 자신의 상태를 체크해 디바이스로 이벤트를 보내는게 더 바람직한 방법인지?</p>
<p>A. 네이티브 코드가 자신의 상태 를 체크하고 디바이스로 이벤트를 보내는 것이 더 바람직한 방법일 수 있습니다. 이렇게 하면 네이티브 코드가 비동기적으로 실행되므로 성능에 영향을 미치지 않습니다.</p>
<p>Q. 이벤트에미터를 이용해 이벤트를 보내려 할 때, 이벤트 이름을 여러가지로 하면 리액트네이티브 브릿지 영역에서 그것을 이름과 상관없이 모두 구독하는 방법은 없고 일회성이라도 따로 리스너를 만들어 해당 이름의 이벤트를 리슨하다가 트리거된 뒤에 삭제하는 방법이 최선의 방법인지?</p>
<p>A. 각 이벤트에 대해 따로 리스너를 만들어 해당 이름의 이벤트를 리슨하다가 트리거된 뒤에 삭제하는 방법이 일반적입니다.</p>
<p>Q. 그렇다면 각각 다른 메소드들이 이벤트 이름을 하나로 통일하고, 특정한 형식에 따라 무엇에 대한 정보를 담은 데이터인지, 실제 데이터를 담은 코드와 함께 리턴하는 방식으로 구현하는 것은 괜찮은 아이디어일까</p>
<p>A. 이 방법을 사용하면 이벤트 리스너를 하나만 만들어서 여러 가지 이벤트를 처리할 수 있습니다.</p>
<p>Q. 모바일 애플리케이션에서 동기 메소드를 사용하면 다른 코드들의 동작을 Blocking해서 성능 저하를 일으킬 수 있다는 것은 이해했어. 메소드 내의 복잡한 로직을 실행하기 전에 간단한 boolean이나 숫자, 문자열 같은 것을 상태체크를 위해 먼저 리턴하고, 이후 요청을 전달받은 다른 함수가 그에 대한 응답을 이벤트에밋터를 통해 보내는 것 역시 권장되지 않거나 비효율적인 방법이야?</p>
<p>A. 메소드 내의 복잡한 로직을 실행하기 전에 간단한 boolean이나 숫자, 문자열 같은 것을 상태체크를 위해 먼저 리턴하고 이후 요청을 전달받은 다른 함수가 그에 대한 응답을 이벤트 에미터를 통해 보내는 것은 가능합니다. 이  방법을 사용하면 메소드가 비동기적으로 실행되므로 성능에 영향을 미치지 않습니다.</p>
<p>다음은 blocking method가 값을 리턴하면서 다른 메소드에 이벤트를 전달해 비동기적으로 sendEvent하는 예제 코드입니다.</p>
<pre><code class="language-javascript">import { NativeModules, NativeEventEmitter } from &quot;react-native&quot;;
const MyNativeModule = NativeModules.MyNativeModule;
const myEventEmitter = new NativeEventEmitter(MyNativeModule);
myEventEmitter.addListener(&quot;MyEvent&quot;, (event) =&gt; {
  console.log(event); // event data
});
const result = MyNativeModule.myBlockingMethod();
console.log(result); // blocking method return value
</code></pre>
<p>이 예제에서 <code>MyNativeModule.myBlockingMethod</code>는 blocking method로 값을 리턴합니다. 이 메소드는 또한 다른 메소드에 이벤트를 전달하여 비동기적으로 <code>sendEvent</code>를 호출합니다. <code>myEventEmitter.addListener</code>를 사용하여 <code>MyEvent</code> 이벤트를 수신하고 처리합니다.</p>
<h2 id="objective-c-를-사용해-blocking-method와-sendevent를-구현한-ios-네이티브-측의-코드도-코드">Objective-C++ 를 사용해 blocking method와 sendEvent를 구현한 iOS 네이티브 측의 코드도 코드</h2>
<pre><code class="language-objectivec">// MyNativeModule.h
#import &lt;React/RCTBridgeModule.h&gt;
#import &lt;React/RCTEventEmitter.h&gt;
@interface MyNativeModule : RCTEventEmitter &lt;RCTBridgeModule&gt;
@end
// MyNativeModule.m
#import &quot;MyNativeModule.h&quot;
@implementation MyNativeModule
RCT_EXPORT_MODULE();
- (NSArray&lt;NSString *&gt; *)supportedEvents {
      return @[@&quot;MyEvent&quot;];
}
RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD(myBlockingMethod) {
      // Perform blocking operation and return result
  NSString *result = @&quot;Blocking method result&quot;;
 
  // Send event asynchronously
  [self sendEventWithName:@&quot;MyEvent&quot; body:@{@&quot;key&quot;: @&quot;value&quot;}];
 
  return result;
}
@end
</code></pre>
<p>이 예제에서 <code>myBlockingMethod</code>는 blocking method로 값을 리턴합니다. 이 메소드는 또한 <code>sendEventWithName</code> 메소드를 호출하여 비동기적으로 <code>MyEvent</code> 이벤트를 전달합니다. React Native 측에서는 <code>myEventEmitter.addListener</code>를 사용하여 이 이벤트를 수신하고 처리할 수 있습니다.</p>
<h2 id="이-방식을-사용할-때-주의해야-할-점">이 방식을 사용할 때 주의해야 할 점</h2>
<ol>
<li>이벤트 리스너를 적절한 시점에 추가하고 제거해야 합니다. 이벤트 리스너가 더 이상 필요하지 않을 때 제거하지 않으면 메모리 누수가 발생할 수 있습니다.</li>
<li>blocking method는 메인 스레드에서 실행되므로 너무 오래 걸리는 작업을 수행하면 애플리케이션의 반응성이 저하될 수 있습니다. 가능한 한 빠르게 완료되는 작업만 blocking method에서 수행하는 것이 좋습니다.</li>
<li>이벤트 데이터의 형식을 명확하게 정의해야 합니다. 이벤트 데이터의 형식이 명확하지 않으면 React Native 측에서 이벤트를 처리하는 데 어려움이 발생할 수 있습니다.</li>
<li>네이티브 모듈과 React Native 코드 간의 인터페이스를 명확하게 정의해야 합니다. 인터페이스가 명확하지 않으면 코드 유지보수가 어려워질 수 있습니다.
리액트네이티브의 nativeeventemitter에 addListener(callback).remove() 이렇게 응답받았을때의 코드 바로 뒤에 remove 메소드를 붙이면 이벤트를 한번이라도 받은 뒤에 삭제돼 아니면 그냥 바로 삭제돼?</li>
</ol>
<p><code>NativeEventEmitter</code>의 <code>addListener</code> 메소드는 이벤트 리스너를 추가하고 <code>EmitterSubscription</code> 객체를 반환합니다. 이 객체의 <code>remove</code> 메소드를 호출하면 이벤트 리스너가 제거됩니다.</p>
<pre><code class="language-javascript">const subscription = myEventEmitter.addListener(&quot;MyEvent&quot;, (event) =&gt; {
  console.log(event); // event data
});
// ...
subscription.remove(); // remove event listener
</code></pre>
<p>이 예제에서 <code>subscription.remove()</code>를 호출하면 이벤트 리스너가 제거됩니다. 따라서 <code>addListener(callback).remove()</code>와 같은 코드는 이벤트 리스너를 바로 제거하므로 이벤트를 한 번도 받지 못합니다.</p>
<h2 id="이벤트-리스너의-콜백-함수-안에서-subscription-자신을-삭제하는-예제">이벤트 리스너의 콜백 함수 안에서 <code>subscription</code> 자신을 삭제하는 예제</h2>
<pre><code class="language-javascript">let subscription;
const handleEvent = (event) =&gt; {
  console.log(event); // event data // Remove event listener
  subscription.remove();
};
subscription = myEventEmitter.addListener(&quot;MyEvent&quot;, handleEvent);
</code></pre>
<p>이 예제에서 <code>handleEvent</code> 함수는 이벤트 리스너의 콜백 함수로, 이벤트를 처리한 후 <code>subscription.remove()</code>를 호출하여 이벤트 리스너를 제거합니다. 따라서 이 방식을 사용하면 이벤트가 한 번 발생한 후에 이벤트 리스너가 제거됩니다.</p>
<h2 id="이벤트-리스너의-콜백-함수-안에서-subscription-자신을-삭제하는-방식을-사용하는-경우와-그렇지-않은-경우의-차이점">이벤트 리스너의 콜백 함수 안에서 <code>subscription</code> 자신을 삭제하는 방식을 사용하는 경우와 그렇지 않은 경우의 차이점</h2>
<ul>
<li>이벤트 리스너의 콜백 함수 안에서 <code>subscription</code> 자신을 삭제하는 방식을 사용하는 경우: 이벤트가 한 번 발생한 후에 이벤트 리스너가 제거됩니다. 따라서 이 방식은 이벤트를 한 번만 처리하고 싶을 때 유용합니다.</li>
<li>이벤트 리스너의 콜백 함수 안에서 <code>subscription</code> 자신을 삭제하지 않는 경우: 이벤트 리스너가 계속 유지됩니다. 따라서 이 방식은 여러 번 발생하는 이벤트를 처리하고 싶을 때 유용합니다. 두 가지 방식 중 어느 것이 더 나은지는 애플리케이션의 요구사항과 구현 세부 사항에 따라 달라집니다. 애플리케이션의 요구사항에 맞는 방식을 선택하여 사용하는 것이 좋습니다.</li>
</ul>
<h2 id="nativeeventemitter의-래퍼-훅으로-listenonce-함수를-사용하여-일회성-이벤트-리스너를-등록하고-이벤트를-최초-한-번-받은-후에-스스로-할당을-해제하는-예제-코드"><code>NativeEventEmitter</code>의 래퍼 훅으로 <code>listenOnce</code> 함수를 사용하여 일회성 이벤트 리스너를 등록하고 이벤트를 최초 한 번 받은 후에 스스로 할당을 해제하는 예제 코드</h2>
<pre><code class="language-javascript">import { NativeEventEmitter } from &quot;react-native&quot;;
const listenOnce = (eventEmitter, eventName, callback) =&gt; {
  let subscription;
  const handleEvent = (...args) =&gt; {
    callback(...args); // Remove event listener
    subscription.remove();
  };
  subscription = eventEmitter.addListener(eventName, handleEvent);
};
// Usage example

const myEventEmitter = new NativeEventEmitter(MyNativeModule);
listenOnce(myEventEmitter, &quot;MyEvent&quot;, (event) =&gt; {
  console.log(event); // event data
});
</code></pre>
<p>이 예제에서 <code>listenOnce</code> 함수는 <code>eventEmitter</code>, <code>eventName</code>, <code>callback</code> 세 개의 인수를 받습니다. 이 함수는 일회성 이벤트 리스너를 등록하고 이벤트가 발생하면 콜백 함수를 호출한 후에 이벤트 리스너를 제거합니다. 따라서 이 방식을 사용하면 이벤트가 한 번 발생한 후에 자동으로 할당이 해제됩니다.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/wiki/en/blog/identify-the-project-with-readme-md-and-package-json"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">README.md + package.json로 프로젝트 파악</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/wiki/en/blog/how-to-enhance-experience-of-dal-e-and-midjourney-ai-artists"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">How to enhance experience of Dal-E and Midjourney AI artists?</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#리액트-네이티브-라이브러리-시-동기식으로-메소드를-호출하는-방법" class="table-of-contents__link toc-highlight">리액트 네이티브 라이브러리 시 동기식으로 메소드를 호출하는 방법</a><ul><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></li><li><a href="#rct_export_blocking_synchronous_method" class="table-of-contents__link toc-highlight"><code>RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD</code></a><ul><li><a href="#references-1" class="table-of-contents__link toc-highlight">References</a></li></ul></li><li><a href="#비동기-메소드를-줄이기-위한-접근-방법" class="table-of-contents__link toc-highlight">비동기 메소드를 줄이기 위한 접근 방법</a></li><li><a href="#objective-c-를-사용해-blocking-method와-sendevent를-구현한-ios-네이티브-측의-코드도-코드" class="table-of-contents__link toc-highlight">Objective-C++ 를 사용해 blocking method와 sendEvent를 구현한 iOS 네이티브 측의 코드도 코드</a></li><li><a href="#이-방식을-사용할-때-주의해야-할-점" class="table-of-contents__link toc-highlight">이 방식을 사용할 때 주의해야 할 점</a></li><li><a href="#이벤트-리스너의-콜백-함수-안에서-subscription-자신을-삭제하는-예제" class="table-of-contents__link toc-highlight">이벤트 리스너의  콜백 함수 안에서 <code>subscription</code> 자신을 삭제하는 예제</a></li><li><a href="#이벤트-리스너의-콜백-함수-안에서-subscription-자신을-삭제하는-방식을-사용하는-경우와-그렇지-않은-경우의-차이점" class="table-of-contents__link toc-highlight">이벤트 리스너의 콜백 함수 안에서 <code>subscription</code> 자신을 삭제하는 방식을 사용하는 경우와 그렇지 않은 경우의 차이점</a></li><li><a href="#nativeeventemitter의-래퍼-훅으로-listenonce-함수를-사용하여-일회성-이벤트-리스너를-등록하고-이벤트를-최초-한-번-받은-후에-스스로-할당을-해제하는-예제-코드" class="table-of-contents__link toc-highlight"><code>NativeEventEmitter</code>의 래퍼 훅으로 <code>listenOnce</code> 함수를 사용하여 일회성 이벤트 리스너를 등록하고 이벤트를 최초 한 번 받은 후에 스스로 할당을 해제하는 예제 코드</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/wiki/en/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/wiki/en/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/AndrewDongminYoo/wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>